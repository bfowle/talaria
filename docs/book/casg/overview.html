<!DOCTYPE HTML>
<html lang="en" class="rust sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Storage Overview - Talaria Documentation</title>


        <!-- Custom HTML head -->
        <!-- MathJax Configuration -->
        <script>
        window.MathJax = {
          tex2jax: {
            inlineMath: [['$','$'], ['\\(','\\)']],
            displayMath: [['$$','$$'], ['\\[','\\]']],
            processEscapes: true,
            processEnvironments: true
          },
          TeX: {
            equationNumbers: { autoNumber: "AMS" },
            extensions: ["AMSmath.js", "AMSsymbols.js"]
          }
        };
        </script>
        <meta name="description" content="Intelligent FASTA reduction for aligner index optimization">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../custom.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "rust";
            const default_dark_theme = "ayu";
            window.path_to_searchindex_js = "../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Talaria Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/Andromeda-Tech/talaria" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/Andromeda-Tech/talaria/edit/main/docs/src/casg/overview.md" title="Suggest an edit" aria-label="Suggest an edit" rel="edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="content-addressed-sequence-graph-casg"><a class="header" href="#content-addressed-sequence-graph-casg">Content-Addressed Sequence Graph (CASG)</a></h1>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>The Content-Addressed Sequence Graph (CASG) represents a paradigm shift in how we store, distribute, and manage biological sequence databases. As genomic data doubles every seven months and protein databases grow exponentially, the traditional approach of downloading entire databases for each update has become unsustainable. Talaria solves this challenge through a combination of content-addressed storage, cryptographic verification, and intelligent chunking that reduces update bandwidth by 99% while maintaining perfect data integrity.</p>
<h3 id="the-problem-database-update-explosion"><a class="header" href="#the-problem-database-update-explosion">The Problem: Database Update Explosion</a></h3>
<p>Consider the reality facing a typical bioinformatics lab:</p>
<ul>
<li><strong>NCBI nr database</strong>: 500GB+ compressed, over 1TB uncompressed, growing exponentially</li>
<li><strong>Index overhead</strong>: Search indices require 2-5× database size (2-5TB for nr)</li>
<li><strong>Memory requirements</strong>: Memory-based aligners need 500GB+ RAM for nr indexing</li>
<li><strong>Hardware costs</strong>: Single server with 1TB RAM costs $50,000+, requires specialized cooling</li>
<li><strong>Traditional updates</strong>: Re-download the entire database even for minor changes</li>
<li><strong>Monthly bandwidth waste</strong>: 15TB for daily updates (99% redundant data)</li>
<li><strong>Version chaos</strong>: No way to prove which exact version was used in published research</li>
<li><strong>Storage multiplication</strong>: Each team member maintains separate copies</li>
</ul>
<h4 id="traditional-approach-monolithic-database-management"><a class="header" href="#traditional-approach-monolithic-database-management">Traditional Approach: Monolithic Database Management</a></h4>
<p>The traditional approach treats databases as monolithic files that must be replaced entirely with each update:</p>
<pre class="mermaid">graph TB
    subgraph &quot;Traditional Database Updates&quot;
        T1[Version 2024-01-01&lt;br/&gt;500GB]
        T2[Version 2024-02-01&lt;br/&gt;510GB]
        T3[Version 2024-03-01&lt;br/&gt;525GB]

        T1 --&gt;|Full Download&lt;br/&gt;510GB| T2
        T2 --&gt;|Full Download&lt;br/&gt;525GB| T3

        U1[User 1&lt;br/&gt;Local Copy]
        U2[User 2&lt;br/&gt;Local Copy]
        U3[User 3&lt;br/&gt;Local Copy]

        T3 --&gt; U1
        T3 --&gt; U2
        T3 --&gt; U3
    end

    style T1 stroke:#d32f2f,stroke-width:2px
    style T2 stroke:#d32f2f,stroke-width:2px
    style T3 stroke:#d32f2f,stroke-width:2px
    style U1 stroke:#ff5722,stroke-width:2px
    style U2 stroke:#ff5722,stroke-width:2px
    style U3 stroke:#ff5722,stroke-width:2px
</pre>
<p>This approach has served the community for decades but has reached its breaking point. Each user downloads complete databases, updates require full re-downloads regardless of change size, and there’s no mechanism to verify database integrity or track exact versions used in research. The computational requirements have also exploded: indexing NCBI nr for BLAST requires days of computation and produces indices larger than the database itself.</p>
<h4 id="casg-approach-content-addressed-chunking"><a class="header" href="#casg-approach-content-addressed-chunking">CASG Approach: Content-Addressed Chunking</a></h4>
<p>CASG transforms this chaos into order by treating databases not as monolithic files but as graphs of cryptographically-verified chunks, where each piece is stored exactly once and updates only transmit actual changes:</p>
<pre class="mermaid">graph TB
    subgraph &quot;CASG Smart Updates&quot;
        M[Manifest&lt;br/&gt;~2MB]
        C1[Chunk A&lt;br/&gt;SHA256: abc...]
        C2[Chunk B&lt;br/&gt;SHA256: def...]
        C3[New Chunk C&lt;br/&gt;SHA256: ghi...]
        C1_ref[Existing Chunk A&lt;br/&gt;SHA256: abc...]

        M --&gt; C1
        M --&gt; C2
        M --&gt; C3
        C1 -.-&gt;|Deduplicated| C1_ref

        SC[Shared Cache]
        SC --&gt; C1_ref
        SC --&gt; C2
        SC --&gt; C3
    end

    style M stroke:#388e3c,stroke-width:2px
    style C1 stroke:#1976d2,stroke-width:2px
    style C2 stroke:#1976d2,stroke-width:2px
    style C3 stroke:#f57c00,stroke-width:2px,stroke-dasharray: 5 5
    style C1_ref stroke:#0288d1,stroke-width:2px
    style SC stroke:#7b1fa2,stroke-width:2px
</pre>
<p>With CASG, the manifest (a few megabytes) describes the entire database structure. Existing chunks are recognized by their SHA256 hash and reused from local storage. Only genuinely new data (Chunk C) needs downloading. Multiple users can share a single chunk store, eliminating redundant storage.</p>
<h2 id="key-concepts"><a class="header" href="#key-concepts">Key Concepts</a></h2>
<h3 id="1-content-addressed-storage-the-foundation-of-trust"><a class="header" href="#1-content-addressed-storage-the-foundation-of-trust">1. Content-Addressed Storage: The Foundation of Trust</a></h3>
<p>Content-addressed storage fundamentally changes how we think about data identity. Instead of arbitrary names like “swissprot_2024.fasta”, each piece of data is identified by its SHA256 cryptographic hash—a unique fingerprint computed from its actual content.</p>
<h4 id="why-this-matters"><a class="header" href="#why-this-matters">Why This Matters</a></h4>
<p>Imagine you’re reviewing a paper that used “UniProt SwissProt from March 2024”. Which exact version? What if there were multiple updates that day? With traditional naming, you can never be certain. With content-addressing, the hash <code>sha256:abc123...</code> identifies exactly one possible piece of data in the universe. If even a single byte changes, the hash completely changes.</p>
<p>This provides three revolutionary properties:</p>
<ul>
<li>
<p><strong>Immutable Identity</strong>: The address IS the content. You cannot change data at an address without changing the address itself. This eliminates entire classes of errors where files are modified but keep the same name.</p>
</li>
<li>
<p><strong>Cryptographic Verification</strong>: Given a hash and data, you can prove in milliseconds whether they match. No trust required—mathematics guarantees correctness. This is crucial for reproducible science where we must prove exact datasets were used.</p>
</li>
<li>
<p><strong>Perfect Deduplication</strong>: If two labs both have E. coli sequences with hash <code>sha256:def456...</code>, it’s not just similar—it’s identical down to the last bit. Store it once, reference it everywhere.</p>
</li>
</ul>
<h3 id="2-merkle-dags-proof-at-scale"><a class="header" href="#2-merkle-dags-proof-at-scale">2. Merkle DAGs: Proof at Scale</a></h3>
<p>A Merkle Directed Acyclic Graph (DAG) is more than a data structure—it’s a trust framework that scales from single sequences to petabyte databases. Named after Ralph Merkle who invented the concept for cryptographic proofs, these structures power everything from Git to Bitcoin, and now, biological databases.</p>
<h4 id="the-power-of-tree-based-proofs"><a class="header" href="#the-power-of-tree-based-proofs">The Power of Tree-Based Proofs</a></h4>
<p>Instead of storing a flat list of millions of sequences, CASG organizes them into a tree where each node contains the hash of its children. This creates a cascade of proofs: to trust the root, you only need to verify the root hash. To trust any sequence, you only need a path from that sequence to the root—typically just 20-30 hashes even for databases with millions of sequences.</p>
<p>The implications are profound. Let’s walk through a concrete example to understand the power of Merkle proofs:</p>
<h4 id="example-proving-a-sequence-belongs-to-swissprot"><a class="header" href="#example-proving-a-sequence-belongs-to-swissprot">Example: Proving a Sequence Belongs to SwissProt</a></h4>
<p>Suppose you want to prove that sequence P12345 (a specific E. coli protein) was part of the SwissProt database you used in your analysis. With traditional databases, you’d need to share the entire 200MB database. With CASG’s Merkle DAG:</p>
<ol>
<li><strong>Your claim</strong>: “I used SwissProt with root hash <code>sha256:7f3a8b2c...</code>”</li>
<li><strong>The proof</strong> (only 960 bytes for a database with 1 million sequences):
<pre><code>Path to root:
- P12345 hash: sha256:1a2b3c4d...
- Sibling in leaf pair: sha256:5e6f7a8b...
- Parent's sibling: sha256:9c0d1e2f...
- ... (28 more hashes)
- Root: sha256:7f3a8b2c...
</code></pre>
</li>
<li><strong>Verification</strong> (milliseconds):
<ul>
<li>Recompute hashes up the tree</li>
<li>Compare with claimed root</li>
<li>If they match, proof is valid</li>
</ul>
</li>
</ol>
<p>This is the same technology that secures Bitcoin’s trillion-dollar ledger, now applied to biological databases.</p>
<pre class="mermaid">graph TD
    Root[Root Hash&lt;br/&gt;SHA256: 7f3a8b2c...]
    S[Sequences Root&lt;br/&gt;SHA256: 4d5e6f7a...]
    T[Taxonomy Root&lt;br/&gt;SHA256: 8b9c0d1e...]

    Root --&gt; S
    Root --&gt; T

    S --&gt; S1[Chunk Group 1&lt;br/&gt;Hash: 2f3a4b5c...]
    S --&gt; S2[Chunk Group 2&lt;br/&gt;Hash: 6d7e8f9a...]

    T --&gt; T1[Bacteria&lt;br/&gt;Hash: 0b1c2d3e...]
    T --&gt; T2[Eukarya&lt;br/&gt;Hash: 4f5a6b7c...]

    S1 --&gt; C1[Chunk: E.coli sequences&lt;br/&gt;Contains P12345]
    S1 --&gt; C2[Chunk: Salmonella sequences]

    T1 --&gt; T3[Proteobacteria]
    T3 --&gt; T4[E. coli&lt;br/&gt;TaxID: 562]

    C1 -.-&gt;|Proof Path| S1
    S1 -.-&gt;|Proof Path| S
    S -.-&gt;|Proof Path| Root

    style Root stroke:#7b1fa2,stroke-width:3px
    style S stroke:#1976d2,stroke-width:2px
    style T stroke:#388e3c,stroke-width:2px
    style S1 stroke:#1976d2,stroke-width:2px
    style S2 stroke:#1976d2,stroke-width:2px
    style T1 stroke:#388e3c,stroke-width:2px
    style T2 stroke:#388e3c,stroke-width:2px
    style C1 stroke:#0288d1,stroke-width:3px
    style C2 stroke:#0288d1,stroke-width:2px
    style T3 stroke:#2e7d32,stroke-width:2px
    style T4 stroke:#2e7d32,stroke-width:2px
</pre>
<h4 id="real-world-impact"><a class="header" href="#real-world-impact">Real-World Impact</a></h4>
<ul>
<li><strong>Journal submissions</strong>: Include the root hash in your methods. Reviewers can verify exact database version.</li>
<li><strong>Regulatory compliance</strong>: Prove to FDA/EMA that you used validated reference databases.</li>
<li><strong>Collaboration</strong>: Share proofs instead of databases. Colleagues verify without downloading.</li>
<li><strong>Legal disputes</strong>: Cryptographic proof of what data was used, when, and by whom.</li>
</ul>
<h3 id="3-bi-temporal-versioning-when-time-has-two-dimensions"><a class="header" href="#3-bi-temporal-versioning-when-time-has-two-dimensions">3. Bi-Temporal Versioning: When Time Has Two Dimensions</a></h3>
<p>Biological databases face a unique challenge: the sequences themselves evolve separately from our understanding of their relationships. A protein discovered in 2020 might be reclassified to a different organism in 2024. The sequence didn’t change—our knowledge did. CASG handles this elegantly through bi-temporal versioning.</p>
<h4 id="why-two-timelines"><a class="header" href="#why-two-timelines">Why Two Timelines?</a></h4>
<p>Consider this real scenario: In 2020, a protein was submitted as “Lactobacillus casei protein”. In 2023, the Lactobacillus genus was split into 25 genera, and this protein’s organism became “Lacticaseibacillus casei”. For a 2020 paper to be reproducible, we need the 2020 classification. For modern analysis, we need the 2023 classification. Same sequence, different taxonomic contexts.</p>
<p>CASG maintains two independent timelines:</p>
<h4 id="sequence-time-the-what"><a class="header" href="#sequence-time-the-what">Sequence Time (The “What”)</a></h4>
<p>Tracks when molecular data enters the database:</p>
<pre><code>2024-01-01: SwissProt release with 500K sequences
2024-02-01: Added 10K new proteins from structural genomics
2024-03-01: Updated 5K sequences with post-translational modifications
</code></pre>
<h4 id="taxonomy-time-the-how-we-understand-it"><a class="header" href="#taxonomy-time-the-how-we-understand-it">Taxonomy Time (The “How We Understand It”)</a></h4>
<p>Tracks when our classification knowledge changes:</p>
<pre><code>2024-01-15: NCBI Taxonomy quarterly update
2024-02-20: Lactobacillus split into 25 genera (affects 50K sequences)
2024-03-10: New viral family discovered, 10K viruses reclassified
</code></pre>
<h4 id="powerful-temporal-queries"><a class="header" href="#powerful-temporal-queries">Powerful Temporal Queries</a></h4>
<p>This bi-temporal system enables queries impossible with traditional databases:</p>
<ul>
<li>
<p><strong>Historical Reproduction</strong>: “Give me exactly the E. coli proteins as they appeared in the March 2023 paper”—both the sequences AND classifications from that date.</p>
</li>
<li>
<p><strong>Retroactive Analysis</strong>: “Apply today’s improved taxonomy to last year’s sequences”—see how modern understanding changes past results.</p>
</li>
<li>
<p><strong>Classification Evolution</strong>: “Show how this protein’s taxonomic assignment changed over 5 years”—crucial for understanding taxonomic instability.</p>
</li>
<li>
<p><strong>Temporal Joins</strong>: “Find all proteins that were classified as Lactobacillus in 2020 but aren’t now”—identify all affected sequences from taxonomic changes.</p>
</li>
</ul>
<h3 id="4-smart-taxonomic-chunking-biology-aware-storage"><a class="header" href="#4-smart-taxonomic-chunking-biology-aware-storage">4. Smart Taxonomic Chunking: Biology-Aware Storage</a></h3>
<p>Most storage systems treat data as arbitrary bytes. CASG understands that biological sequences have natural relationships that should guide how they’re organized. By chunking sequences based on taxonomic relationships, CASG achieves remarkable efficiency: researchers studying E. coli download only E. coli chunks, not the entire bacterial kingdom.</p>
<h4 id="the-intelligence-behind-chunking"><a class="header" href="#the-intelligence-behind-chunking">The Intelligence Behind Chunking</a></h4>
<p>CASG’s chunking algorithm considers multiple factors:</p>
<p><strong>Taxonomic Coherence</strong>: Sequences from the same organism are kept together. This isn’t just convenient—it’s scientifically optimal. Related sequences share evolutionary history, making them more similar and thus more compressible when stored together.</p>
<p><strong>Access Patterns</strong>: Model organisms like E. coli, human, and mouse get dedicated chunks because they’re frequently accessed. Environmental samples might be grouped at higher taxonomic levels since they’re accessed less specifically.</p>
<p><strong>Chunk Size Optimization</strong>: Each chunk targets 10-50MB (configurable)—large enough for efficient compression and transfer, small enough for granular updates. This sweet spot emerged from extensive benchmarking across various storage and network configurations.</p>
<p><strong>Dynamic Chunking Strategy</strong>: The system adapts chunking based on actual data distribution and access patterns:</p>
<pre><code>Adaptive Chunking:
├── High-frequency access organisms
│   └── Automatically get smaller, dedicated chunks
├── Related organisms
│   └── Grouped by taxonomic distance for compression
└── Rare/environmental sequences
    └── Aggregated into larger chunks by higher taxa
</code></pre>
<p>The chunking algorithm considers evolutionary relationships to maximize compression—related sequences share more content and compress better together.</p>
<h3 id="5-manifest-based-updates-the-talaria-advantage"><a class="header" href="#5-manifest-based-updates-the-talaria-advantage">5. Manifest-Based Updates: The Talaria Advantage</a></h3>
<p>The manifest is CASG’s secret weapon—a compact binary file (<code>.tal</code> format) that completely describes a multi-gigabyte database. Using our proprietary Talaria format (MessagePack-based) with efficient hash encoding, manifests scale linearly with database size while remaining remarkably small. By checking the manifest first, CASG can determine exactly what changed without downloading anything else.</p>
<h4 id="how-manifests-enable-efficient-updates"><a class="header" href="#how-manifests-enable-efficient-updates">How Manifests Enable Efficient Updates</a></h4>
<p>Think of a manifest like a restaurant menu. You don’t need to order every dish to know what’s available—the menu tells you everything. Similarly, the manifest lists every chunk in the database with its hash, size, and taxonomic content. When checking for updates:</p>
<ol>
<li><strong>Download new manifest</strong> (750KB for SwissProt, &lt;2 seconds)</li>
<li><strong>Compare with local manifest</strong> (instant binary comparison)</li>
<li><strong>Download only changed chunks</strong> (typically 1-5% of database)</li>
</ol>
<h4 id="talaria-format-tal-advantages"><a class="header" href="#talaria-format-tal-advantages">Talaria Format (.tal) Advantages</a></h4>
<ul>
<li><strong>50-90% smaller</strong> than JSON (typical compression for biological databases)</li>
<li><strong>MessagePack-based</strong> with custom 4-byte header (<code>TAL\x01</code>) for format identification</li>
<li><strong>Faster parsing</strong> - binary deserialization vs text parsing</li>
<li><strong>Type-safe</strong> - preserves exact numeric types</li>
<li><strong>Format support</strong> - reads .tal (primary format) and .json (opt-in for human readability)</li>
</ul>
<p>This transforms the update problem:</p>
<h4 id="manifest-size-scaling-using-talaria-format"><a class="header" href="#manifest-size-scaling-using-talaria-format">Manifest Size Scaling (using Talaria format)</a></h4>
<ul>
<li><strong>SwissProt</strong> (570K sequences): ~500KB-1MB manifest (&lt;0.5% of database)</li>
<li><strong>TrEMBL</strong> (250M sequences): ~3-8MB manifest (&lt;0.01% of database)</li>
<li><strong>NCBI nr</strong> (1B sequences): ~15-30MB manifest (&lt;0.001% of database)</li>
</ul>
<p>Note: Actual sizes vary based on metadata complexity and compression efficiency.</p>
<pre><code class="language-yaml"># Manifest structure (logical representation)
version: "2024-03-15"
etag: "W/\"5e3b-1234567890\""
taxonomy_root: &lt;32-byte SHA256 hash&gt;
sequence_root: &lt;32-byte SHA256 hash&gt;
bi_temporal_coordinate:
  sequence_time: "2024-03-15T10:00:00Z"
  taxonomy_time: "2024-03-01T00:00:00Z"
chunks:
  - hash: &lt;32-byte SHA256&gt;   # Content-addressed identifier
    taxon_ids: [562, 563]    # E. coli strains
    sequence_count: 1500
    size: 52428800           # ~50MB uncompressed
    compressed_size: 10485760 # ~10MB with zstd
  - hash: &lt;32-byte SHA256&gt;
    taxon_ids: [9606]        # H. sapiens
    sequence_count: 25000
    size: 52428800
    compressed_size: 15728640
# Note: .tal files store this as MessagePack binary with 4-byte header
</code></pre>
<h3 id="6-delta-compressed-storage-evolution-aware-compression"><a class="header" href="#6-delta-compressed-storage-evolution-aware-compression">6. Delta-Compressed Storage: Evolution-Aware Compression</a></h3>
<p>Traditional compression treats each sequence independently, missing the fundamental truth of biology: sequences evolve from common ancestors. CASG’s delta compression leverages evolutionary relationships to achieve compression ratios impossible with general-purpose algorithms.</p>
<h4 id="the-problem-redundant-storage-of-similar-sequences"><a class="header" href="#the-problem-redundant-storage-of-similar-sequences">The Problem: Redundant Storage of Similar Sequences</a></h4>
<p>Biological databases contain massive redundancy. Consider the reality of bacterial genomics:</p>
<pre class="mermaid">graph LR
    subgraph &quot;Traditional Storage: Every Sequence Stored Completely&quot;
        S1[E. coli K12&lt;br/&gt;5.2MB genome]
        S2[E. coli O157:H7&lt;br/&gt;5.3MB genome]
        S3[E. coli UTI89&lt;br/&gt;5.1MB genome]
        S4[E. coli CFT073&lt;br/&gt;5.2MB genome]
        S5[E. coli 536&lt;br/&gt;4.9MB genome]
    end

    DB[(Database&lt;br/&gt;Total: 25.7MB)]
    S1 --&gt; DB
    S2 --&gt; DB
    S3 --&gt; DB
    S4 --&gt; DB
    S5 --&gt; DB

    style S1 stroke:#d32f2f,stroke-width:2px
    style S2 stroke:#d32f2f,stroke-width:2px
    style S3 stroke:#d32f2f,stroke-width:2px
    style S4 stroke:#d32f2f,stroke-width:2px
    style S5 stroke:#d32f2f,stroke-width:2px
    style DB stroke:#d32f2f,stroke-width:3px
</pre>
<p>These E. coli strains share 95-98% of their DNA—they’re storing the same information five times with minor variations. This is like storing five copies of an encyclopedia where only a few pages differ between editions. The waste is staggering: NCBI’s database contains over 50,000 E. coli genomes, representing terabytes of redundant storage.</p>
<h4 id="casg-solution-delta-compression-based-on-evolution"><a class="header" href="#casg-solution-delta-compression-based-on-evolution">CASG Solution: Delta Compression Based on Evolution</a></h4>
<p>CASG recognizes that biology provides a natural compression framework: evolution. Instead of storing every sequence completely, we store one reference and encode others as differences:</p>
<pre class="mermaid">graph LR
    subgraph &quot;CASG Delta Storage: Store Differences Only&quot;
        R[Reference: E. coli K12&lt;br/&gt;5.2MB full genome]
        D1[Delta: O157:H7&lt;br/&gt;~150KB differences]
        D2[Delta: UTI89&lt;br/&gt;~120KB differences]
        D3[Delta: CFT073&lt;br/&gt;~100KB differences]
        D4[Delta: 536&lt;br/&gt;~180KB differences]

        R --&gt; D1
        R --&gt; D2
        R --&gt; D3
        R --&gt; D4
    end

    DBC[(Compressed Database&lt;br/&gt;Total: 5.75MB)]
    R --&gt; DBC
    D1 --&gt; DBC
    D2 --&gt; DBC
    D3 --&gt; DBC
    D4 --&gt; DBC

    style R stroke:#388e3c,stroke-width:3px
    style D1 stroke:#1976d2,stroke-width:2px
    style D2 stroke:#1976d2,stroke-width:2px
    style D3 stroke:#1976d2,stroke-width:2px
    style D4 stroke:#1976d2,stroke-width:2px
    style DBC stroke:#388e3c,stroke-width:3px
</pre>
<p><strong>Compression Results</strong>:</p>
<ul>
<li>Traditional storage: 25.7MB for 5 genomes</li>
<li>Delta-compressed: 5.75MB (78% reduction)</li>
<li>For 1000 E. coli strains: ~95% reduction</li>
<li>For entire nr database: 60-80% reduction</li>
</ul>
<h4 id="how-delta-compression-works"><a class="header" href="#how-delta-compression-works">How Delta Compression Works</a></h4>
<h4 id="intelligent-reference-selection"><a class="header" href="#intelligent-reference-selection">Intelligent Reference Selection</a></h4>
<p>Not all sequences make good references. CASG uses sophisticated algorithms to choose optimal references based on:</p>
<ol>
<li><strong>Centrality</strong>: References that are similar to many sequences</li>
<li><strong>Stability</strong>: Sequences unlikely to be revised</li>
<li><strong>Completeness</strong>: Full-length, high-quality sequences</li>
<li><strong>Phylogenetic representation</strong>: Coverage across the evolutionary tree</li>
</ol>
<h4 id="delta-types-in-casg"><a class="header" href="#delta-types-in-casg">Delta Types in CASG</a></h4>
<p>CASG supports multiple types of delta operations, matching biological variation patterns:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>enum DeltaOperation {
    // Substitutions (point mutations, SNPs)
    Substitute {
        position: usize,
        reference: Vec&lt;u8&gt;,
        alternative: Vec&lt;u8&gt;
    },

    // Insertions
    Insert {
        position: usize,
        sequence: Vec&lt;u8&gt;
    },

    // Deletions
    Delete {
        position: usize,
        length: usize
    },

    // Copy from reference
    Copy {
        start: usize,
        length: usize
    },
}
<span class="boring">}</span></code></pre></pre>
<h4 id="incremental-updates-via-deltas"><a class="header" href="#incremental-updates-via-deltas">Incremental Updates via Deltas</a></h4>
<p>Delta compression enables efficient incremental updates. When a database updates:</p>
<ol>
<li><strong>New sequences</strong>: Stored as deltas from existing references</li>
<li><strong>Modified sequences</strong>: Only the changes are transmitted</li>
<li><strong>Unchanged sequences</strong>: Zero bandwidth required</li>
</ol>
<p>Example update scenario:</p>
<pre><code class="language-yaml"># January Database: 100GB
references: 10GB
deltas: 90GB

# February Update: Only 500MB transmitted
new_deltas: 400MB      # New sequences
update_deltas: 100MB   # Corrections to existing sequences
# Result: 100.5GB database from 500MB download
</code></pre>
<h4 id="delta-chain-management"><a class="header" href="#delta-chain-management">Delta Chain Management</a></h4>
<p>CASG prevents “delta chains” from growing too long, which would slow reconstruction:</p>
<pre><code>Good: Reference → Delta (1 hop)
OK:   Reference → Delta → Delta (2 hops)
Bad:  Reference → Delta → Delta → Delta → ... (many hops)

CASG automatically re-bases deep deltas to maintain performance
</code></pre>
<h4 id="integration-with-talaria-reduction"><a class="header" href="#integration-with-talaria-reduction">Integration with Talaria Reduction</a></h4>
<p>Delta compression in CASG is tightly integrated with Talaria’s sequence reduction algorithms. When Talaria selects representative sequences for aligner optimization, these same sequences serve as ideal delta references, providing dual benefits:</p>
<ol>
<li><strong>Optimal for aligners</strong>: Representatives chosen for biological diversity</li>
<li><strong>Optimal for compression</strong>: Same representatives minimize delta sizes</li>
</ol>
<p>This synergy means that a Talaria-reduced database is automatically optimized for both search performance and storage efficiency.</p>
<h2 id="benefits-real-world-impact"><a class="header" href="#benefits-real-world-impact">Benefits: Real-World Impact</a></h2>
<h3 id="for-individual-researchers"><a class="header" href="#for-individual-researchers">For Individual Researchers</a></h3>
<p>CASG transforms the daily reality of bioinformatics work:</p>
<p><strong>Selective Downloads</strong>: A researcher studying plant proteins doesn’t need bacterial sequences. With CASG, they download only plant-related chunks—potentially 10GB instead of 100GB. The storage savings compound: five team members studying different organisms might need only 30GB total instead of 5×100GB.</p>
<p><strong>Instant Update Checks</strong>: That anxiety of “Is my database current?” disappears. A manifest check takes under a second and definitively answers whether updates exist. No more re-downloading entire databases “just to be sure”.</p>
<p><strong>Network Resilience</strong>: Interrupted downloads resume automatically. Each chunk is verified independently, so partial downloads are useful immediately. This matters enormously in regions with unstable internet.</p>
<p><strong>Perfect Reproducibility</strong>: Published a paper? Include the manifest hash. Anyone, anywhere, anytime can reconstruct your exact database—even years later when numerous updates have occurred. This isn’t just convenient; it’s essential for scientific reproducibility.</p>
<h3 id="for-teams-and-institutions"><a class="header" href="#for-teams-and-institutions">For Teams and Institutions</a></h3>
<p>CASG’s benefits multiply in collaborative environments:</p>
<p><strong>Shared Infrastructure</strong>: When multiple researchers use overlapping databases, CASG stores each unique chunk only once. A 20-person lab might need only 150GB for databases that would traditionally require 2TB (20×100GB). The storage system becomes a shared asset, not duplicated overhead.</p>
<p><strong>Verifiable Collaboration</strong>: “Which version did you use?” becomes trivially answerable. Manifest hashes provide cryptographic proof of exact database states. Peer reviewers can verify that claimed databases were actually used. Grant applications can guarantee reproducibility.</p>
<p><strong>Selective Sharing</strong>: Need to share just human proteins with a collaborator? Generate a subset manifest listing only relevant chunks. They download only what they need, verified against your cryptographic proofs. No more shipping hard drives or waiting for complete database transfers.</p>
<p><strong>Compliance and Auditing</strong>: For regulated environments, CASG provides complete audit trails. Every chunk access is logged with cryptographic verification. Prove compliance with data handling requirements through immutable hash chains.</p>
<h3 id="for-infrastructure-and-it-teams"><a class="header" href="#for-infrastructure-and-it-teams">For Infrastructure and IT Teams</a></h3>
<p>CASG turns database management from a burden into a strategic advantage:</p>
<p><strong>CDN Optimization</strong>: Immutable chunks are a CDN’s dream. Set cache headers to “forever”—a chunk’s content never changes. Geographic distribution becomes trivial: chunks can be served from the nearest location without any synchronization concerns.</p>
<p><strong>Bandwidth Reduction</strong>: Updates that once consumed terabits yearly now use gigabits. For institutions with metered connections or cloud egress charges, this translates to massive cost savings. One university reported 95% reduction in database-related bandwidth costs.</p>
<p><strong>Distributed Resilience</strong>: Lost a server? No problem. Chunks can be recovered from any source—other servers, tape backups, even peer institutions. The hash verification ensures perfect recovery regardless of source.</p>
<p><strong>Storage Tiering</strong>: Frequently accessed chunks (model organisms) stay on fast SSDs. Rarely accessed chunks (obscure species) migrate to cheaper storage. The content-addressed design makes this transparent—the hash doesn’t change when data moves.</p>
<p><strong>P2P Possibilities</strong>: Content-addressing enables BitTorrent-style distribution. Labs can share bandwidth costs by serving chunks to peers. During major updates, the load distributes naturally across participants.</p>
<h3 id="for-distributed-computing-and-clusters"><a class="header" href="#for-distributed-computing-and-clusters">For Distributed Computing and Clusters</a></h3>
<p>CASG’s architecture fundamentally changes the economics and practicality of biological sequence analysis at scale:</p>
<p><strong>Beyond Monolithic Servers</strong>: Traditional sequence analysis requires massive single servers—NCBI’s BLAST servers have 1TB+ RAM and cost hundreds of thousands of dollars. CASG enables a radically different approach: distributed processing across commodity hardware.</p>
<p><strong>Sharding by Taxonomy</strong>: With CASG’s taxonomic chunking, different nodes can specialize:</p>
<pre><code>Node Cluster Architecture:
├── Bacteria Nodes (32GB RAM each)
│   ├── Node 1: E. coli, Salmonella chunks
│   ├── Node 2: Mycobacterium, Bacillus chunks
│   └── Node 3: Environmental bacteria chunks
├── Viral Nodes (16GB RAM each)
│   ├── Node 4: RNA viruses
│   └── Node 5: DNA viruses
└── Eukaryote Nodes (64GB RAM each)
    ├── Node 6: Human, mouse chunks
    └── Node 7: Plants, fungi chunks

Total: 7 commodity nodes (~\$15,000) vs 1 specialized server (\$150,000+)
</code></pre>
<p><strong>Map-Reduce Pattern Enablement</strong>: CASG chunks naturally partition work:</p>
<ol>
<li><strong>Map phase</strong>: Each node processes its taxonomic chunks independently</li>
<li><strong>Reduce phase</strong>: Results aggregated by taxonomic hierarchy</li>
<li><strong>Verification</strong>: Merkle proofs ensure all chunks were processed correctly</li>
</ol>
<p><strong>Elastic Scaling</strong>: Need more power for human genomics? Add nodes with human chunks. Studying soil microbiomes? Scale bacterial nodes. Pay for what you use, when you use it.</p>
<p><strong>Cloud-Native Benefits</strong>:</p>
<ul>
<li><strong>Spot instances</strong>: Chunks are immutable, so interrupted work can resume elsewhere</li>
<li><strong>Geographic distribution</strong>: Serve chunks from the nearest region</li>
<li><strong>Heterogeneous hardware</strong>: CPU nodes for alignment, GPU nodes for ML, memory nodes for assembly</li>
<li><strong>Incremental processing</strong>: Process new chunks as they arrive, not entire database</li>
</ul>
<p><strong>Real Cost Comparison</strong>:</p>
<pre><code class="language-yaml">Traditional Monolithic:
  Server: \$150,000 (1TB RAM, 128 cores)
  Cooling: \$20,000/year
  Maintenance: \$30,000/year
  Downtime: Entire system offline for updates
  Scaling: Buy another \$150,000 server

CASG Distributed:
  Initial: \$15,000 (7 commodity nodes)
  Cooling: Standard data center
  Maintenance: Replace individual nodes (\$2,000)
  Downtime: Rolling updates, no service interruption
  Scaling: Add \$2,000 nodes as needed
</code></pre>
<p><strong>Fault Tolerance</strong>: When a node fails in a monolithic system, everything stops. In CASG’s distributed model:</p>
<ul>
<li>Other nodes continue processing their chunks</li>
<li>Failed node’s chunks are redistributed</li>
<li>Merkle verification ensures correctness despite failures</li>
<li>No single point of failure</li>
</ul>
<h2 id="mathematical-foundation-the-science-behind-casg"><a class="header" href="#mathematical-foundation-the-science-behind-casg">Mathematical Foundation: The Science Behind CASG</a></h2>
<p>CASG’s reliability stems from mathematical principles that provide provable guarantees, not just empirical testing. These foundations, drawn from cryptography and information theory, ensure that CASG’s claims of integrity and efficiency are mathematically verifiable.</p>
<h3 id="content-addressing-universal-unique-identity"><a class="header" href="#content-addressing-universal-unique-identity">Content Addressing: Universal Unique Identity</a></h3>
<p>For any data chunk <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span></span></span></span>, its address is computed as:
<span class="katex-display"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">Address</span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">SHA256</span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mclose">)</span></span></span></span></span></p>
<p>The SHA256 function produces a 256-bit hash with remarkable properties:</p>
<ul>
<li><strong>Avalanche effect</strong>: Changing one bit in <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span></span></span></span> changes ~50% of hash bits</li>
<li><strong>Collision resistance</strong>: Probability of two different inputs producing the same hash is <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">256</span></span></span></span></span></span></span></span></span></span></span></span> (effectively impossible)</li>
<li><strong>One-way function</strong>: Given a hash, finding the original data requires <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">256</span></span></span></span></span></span></span></span></span></span></span></span> operations (heat death of universe timeframe)</li>
</ul>
<h3 id="merkle-tree-construction-logarithmic-proof-scaling"><a class="header" href="#merkle-tree-construction-logarithmic-proof-scaling">Merkle Tree Construction: Logarithmic Proof Scaling</a></h3>
<p>For a database with chunks <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">…</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>, the Merkle tree is constructed recursively:
<span class="katex-display"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord text"><span class="mord">Root</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">…</span><span class="mclose">)</span></span></span></span></span></p>
<p>Where <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span></span></span></span> is SHA256. This creates a binary tree with <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> height, meaning:</p>
<ul>
<li>Proof size: <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> - remains small even for millions of chunks</li>
<li>Verification time: <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> - nearly instant regardless of database size</li>
<li>Update cost: <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> - changing one chunk requires updating only the path to root</li>
</ul>
<h3 id="proof-of-inclusion-cryptographic-membership"><a class="header" href="#proof-of-inclusion-cryptographic-membership">Proof of Inclusion: Cryptographic Membership</a></h3>
<p>To prove chunk <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> belongs to database with root <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span>:
<span class="katex-display"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord text"><span class="mord">Proof</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0813em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">sibling</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0813em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">parent-sibling</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">…</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0813em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">root</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span></span></span></span></span></p>
<p>The verification reconstructs the root:
<span class="katex-display"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">Verify</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord text"><span class="mord">Proof</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord text"><span class="mord">Reconstruct</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord text"><span class="mord">Proof</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">)</span></span></span></span></span></p>
<p>This proof is:</p>
<ul>
<li><strong>Compact</strong>: Only <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">32</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> bytes</li>
<li><strong>Unforgeable</strong>: Requires breaking SHA256 to fake</li>
<li><strong>Independently verifiable</strong>: No trust in prover needed</li>
</ul>
<h3 id="temporal-integrity-bi-dimensional-binding"><a class="header" href="#temporal-integrity-bi-dimensional-binding">Temporal Integrity: Bi-dimensional Binding</a></h3>
<p>For sequence version <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> at time <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7651em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> and taxonomy version <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> at time <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7651em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>:
<span class="katex-display"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">CrossHash</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord">∣∣</span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord">∣∣</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣∣</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p>
<p>This creates an immutable binding between sequence data and taxonomic context, enabling:</p>
<ul>
<li><strong>Temporal proofs</strong>: Prove exact state at any point in time</li>
<li><strong>Cross-time verification</strong>: Validate relationships across time dimensions</li>
<li><strong>Audit trails</strong>: Cryptographically secured history of all changes</li>
</ul>
<h3 id="information-theoretic-optimality"><a class="header" href="#information-theoretic-optimality">Information-Theoretic Optimality</a></h3>
<p>CASG’s chunking approaches the theoretical optimum for compression and deduplication. Given sequences with similarity <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span>, the expected storage reduction is:
<span class="katex-display"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord text"><span class="mord">Storage</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mclose">)</span></span></span></span></span></p>
<p>Where:</p>
<ul>
<li><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> = number of sequences</li>
<li><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span></span></span></span> = average sequence length</li>
<li><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span> = average similarity between sequences</li>
<li><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">d</span></span></span></span> = deduplication efficiency (approaches 1.0 with good chunking)</li>
</ul>
<p>CASG achieves <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.95</span></span></span></span> for typical biological databases through taxonomy-aware chunking.</p>
<h2 id="architecture"><a class="header" href="#architecture">Architecture</a></h2>
<pre class="mermaid">graph LR
    subgraph &quot;Client&quot;
        CLI[CLI Commands]
        API[Rust API]
    end

    subgraph &quot;CASG Core&quot;
        M[Manifest Manager]
        S[Storage Layer]
        C[Chunker]
        A[Assembler]
        V[Verifier]
        T[Taxonomy Manager]
    end

    subgraph &quot;Remote&quot;
        R1[NCBI]
        R2[UniProt]
        R3[IPFS]
        R4[S3/CDN]
    end

    CLI --&gt; API
    API --&gt; M
    M --&gt; S
    S --&gt; C
    S --&gt; A
    S --&gt; V
    C --&gt; T

    M -.-&gt; |Fetch manifests| R1
    M -.-&gt; |Fetch manifests| R2
    S -.-&gt; |Fetch chunks| R3
    S -.-&gt; |Fetch chunks| R4

    style CLI stroke:#1976d2,stroke-width:2px
    style API stroke:#1976d2,stroke-width:2px
    style M stroke:#f57c00,stroke-width:2px
    style S stroke:#1976d2,stroke-width:2px
    style C stroke:#00796b,stroke-width:2px
    style A stroke:#00796b,stroke-width:2px
    style V stroke:#388e3c,stroke-width:2px
    style T stroke:#388e3c,stroke-width:2px
    style R1 stroke:#757575,stroke-width:2px,stroke-dasharray: 5 5
    style R2 stroke:#757575,stroke-width:2px,stroke-dasharray: 5 5
    style R3 stroke:#757575,stroke-width:2px,stroke-dasharray: 5 5
    style R4 stroke:#757575,stroke-width:2px,stroke-dasharray: 5 5
</pre>
<h2 id="discrepancy-detection-maintaining-data-integrity"><a class="header" href="#discrepancy-detection-maintaining-data-integrity">Discrepancy Detection: Maintaining Data Integrity</a></h2>
<p>Biological databases suffer from a hidden problem: inconsistent taxonomic annotations. A sequence might claim to be from E. coli in its header, but mapping tables say it’s from Salmonella. Which is correct? CASG includes a discrepancy detection framework to identify, track, and help resolve these inconsistencies.</p>
<h3 id="the-discrepancy-crisis"><a class="header" href="#the-discrepancy-crisis">The Discrepancy Crisis</a></h3>
<p>Studies estimate that 5-10% of sequences in public databases have some form of taxonomic inconsistency:</p>
<ul>
<li><strong>Header/Mapping Conflicts</strong>: FASTA header says one organism, accession2taxid says another</li>
<li><strong>Obsolete Classifications</strong>: Using old taxonomic names that have been revised</li>
<li><strong>Missing Annotations</strong>: Sequences with no taxonomic information</li>
<li><strong>Invalid References</strong>: Pointing to taxonomic IDs that no longer exist</li>
</ul>
<p>These errors propagate through analyses, potentially invalidating results. CASG provides tools to detect these systematically:</p>
<h3 id="discrepancy-detection-framework"><a class="header" href="#discrepancy-detection-framework">Discrepancy Detection Framework</a></h3>
<p>CASG includes a discrepancy detection system that checks multiple sources:</p>
<pre class="mermaid">graph TD
    Seq[Sequence:&lt;br/&gt;NP_12345.1 E. coli protein]

    H[Header Parser]
    M[Mapping Lookup]
    C[Chunk Context]

    Seq --&gt; H
    Seq --&gt; M
    Seq --&gt; C

    H --&gt; |Claims: E. coli| D{Discrepancy&lt;br/&gt;Detector}
    M --&gt; |Maps to: Salmonella| D
    C --&gt; |Stored with: E. coli| D

    D --&gt; Report[Discrepancy Report:&lt;br/&gt;Conflict detected]

    style Seq stroke:#1976d2,stroke-width:2px
    style H stroke:#00796b,stroke-width:2px
    style M stroke:#00796b,stroke-width:2px
    style C stroke:#00796b,stroke-width:2px
    style D stroke:#d32f2f,stroke-width:2px
    style Report stroke:#d32f2f,stroke-width:3px
</pre>
<p>CASG’s discrepancy detection system automatically identifies and tracks these inconsistencies during database operations, helping maintain data quality and enabling informed decisions about sequence classification.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../databases/downloading.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../casg/workflows.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../databases/downloading.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../casg/workflows.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../mermaid.min.js"></script>
        <script src="../mermaid-init.js"></script>



    </div>
    </body>
</html>
